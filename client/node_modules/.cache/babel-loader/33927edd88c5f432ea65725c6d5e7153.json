{"ast":null,"code":"import _asyncToGenerator from\"F:\\\\Programming\\\\JS\\\\React\\\\productSinchronizator\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _regeneratorRuntime from\"F:\\\\Programming\\\\JS\\\\React\\\\productSinchronizator\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import jwtDecode from\"jwt-decode\";import{$pubHost,$authHost}from\".\";export var loginApi=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(name,password){var _yield$$pubHost$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return $pubHost.post('api/user/login',{name:name,password:password});case 2:_yield$$pubHost$post=_context.sent;data=_yield$$pubHost$post.data;localStorage.setItem(\"jwtHash\",data.jwtHash);return _context.abrupt(\"return\",jwtDecode(data.jwtHash));case 6:case\"end\":return _context.stop();}}},_callee);}));return function loginApi(_x,_x2){return _ref.apply(this,arguments);};}();export var checkApi=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$$authHost$get,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return $authHost.get('api/user/auth');case 2:_yield$$authHost$get=_context2.sent;data=_yield$$authHost$get.data;localStorage.setItem(\"jwtHash\",data);return _context2.abrupt(\"return\",jwtDecode(data));case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function checkApi(){return _ref2.apply(this,arguments);};}();","map":{"version":3,"sources":["F:/Programming/JS/React/productSinchronizator/client/src/httpApi/UserApi.tsx"],"names":["jwtDecode","$pubHost","$authHost","loginApi","name","password","post","data","localStorage","setItem","jwtHash","checkApi","get"],"mappings":"4SAAA,MAAOA,CAAAA,SAAP,KAAsB,YAAtB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,GAApC,CAGA,MAAO,IAAMC,CAAAA,QAAQ,0FAAG,iBAAOC,IAAP,CAAqBC,QAArB,sKAEGJ,CAAAA,QAAQ,CAACK,IAAT,CAAc,gBAAd,CAAgC,CAAEF,IAAI,CAAJA,IAAF,CAAQC,QAAQ,CAARA,QAAR,CAAhC,CAFH,2CAEZE,IAFY,sBAEZA,IAFY,CAGpBC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAgCF,IAAI,CAACG,OAArC,EAHoB,gCAIbV,SAAS,CAACO,IAAI,CAACG,OAAN,CAJI,wDAAH,kBAARP,CAAAA,QAAQ,gDAAd,CAMP,MAAO,IAAMQ,CAAAA,QAAQ,2FAAG,6LAEGT,CAAAA,SAAS,CAACU,GAAV,CAAc,eAAd,CAFH,4CAEZL,IAFY,sBAEZA,IAFY,CAGpBC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAgCF,IAAhC,EAHoB,iCAIbP,SAAS,CAACO,IAAD,CAJI,0DAAH,kBAARI,CAAAA,QAAQ,2CAAd","sourcesContent":["import jwtDecode from \"jwt-decode\";\r\nimport { $pubHost, $authHost } from \".\";\r\nimport { IUser } from \"../store/UserStore\";\r\n\r\nexport const loginApi = async (name: string, password: string) => {\r\n\r\n    const { data } = await $pubHost.post('api/user/login', { name, password });\r\n    localStorage.setItem(\"jwtHash\", data.jwtHash);\r\n    return jwtDecode(data.jwtHash);\r\n}\r\nexport const checkApi = async () => {\r\n\r\n    const { data } = await $authHost.get('api/user/auth');\r\n    localStorage.setItem(\"jwtHash\", data);\r\n    return jwtDecode(data);;\r\n}"]},"metadata":{},"sourceType":"module"}