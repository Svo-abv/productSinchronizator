{"ast":null,"code":"import _asyncToGenerator from\"F:\\\\Programming\\\\JS\\\\React\\\\productSinchronizator\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"F:\\\\Programming\\\\JS\\\\React\\\\productSinchronizator\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"F:\\\\Programming\\\\JS\\\\React\\\\productSinchronizator\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Container,Form,Card,Button}from'react-bootstrap';import React,{useContext,useEffect,useState}from'react';import{loginApi}from'../httpApi/UserApi';import{Context}from'..';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Auth=function Auth(){var _useContext=useContext(Context),user=_useContext.user;var navi=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),pwd=_useState4[0],setPwd=_useState4[1];useEffect(function(){if(user.isAuth){navi(\"/panel\");}});var click=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var decodeUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return loginApi(name,pwd);case 3:decodeUser=_context.sent;user.isAuth=true;user.user=decodeUser;navi(\"/panel\");_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);alert(\"Ошибка авторизации!!\");case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function click(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(Card,{style:{width:600,height:300},className:\"px-5 pb-5 pt-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"m-auto\",children:\"\\u0410\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(Form,{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(Form.Control,{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F...\",className:\"mt-2\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C...\",className:\"mt-2\",value:pwd,onChange:function onChange(e){return setPwd(e.target.value);}}),/*#__PURE__*/_jsx(Button,{className:\"mt-2\",onClick:click,children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]})});};export default Auth;","map":{"version":3,"sources":["F:/Programming/JS/React/productSinchronizator/client/src/pages/Auth.tsx"],"names":["Container","Form","Card","Button","React","useContext","useEffect","useState","loginApi","Context","useNavigate","Auth","user","navi","name","setName","pwd","setPwd","isAuth","click","decodeUser","alert","width","height","e","target","value"],"mappings":"icAAA,OAASA,SAAT,CAAoBC,IAApB,CAA0BC,IAA1B,CAAgCC,MAAhC,KAA8C,iBAA9C,CACA,MAAOC,CAAAA,KAAP,EAA6BC,UAA7B,CAAyCC,SAAzC,CAAoDC,QAApD,KAAoE,OAApE,CACA,OAASC,QAAT,KAAyB,oBAAzB,CACA,OAASC,OAAT,KAAwB,IAAxB,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,wFAUA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CAEf,gBAAiBN,UAAU,CAACI,OAAD,CAA3B,CAAQG,IAAR,aAAQA,IAAR,CACA,GAAMC,CAAAA,IAAI,CAAGH,WAAW,EAAxB,CACA,cAAwBH,QAAQ,CAAC,EAAD,CAAhC,wCAAOO,IAAP,eAAaC,OAAb,eACA,eAAsBR,QAAQ,CAAC,EAAD,CAA9B,yCAAOS,GAAP,eAAYC,MAAZ,eAEAX,SAAS,CAAC,UAAM,CACZ,GAAIM,IAAI,CAACM,MAAT,CAAiB,CACbL,IAAI,CAAC,QAAD,CAAJ,CACH,CACJ,CAJQ,CAAT,CAOA,GAAMM,CAAAA,KAAK,0FAAG,wLAEmBX,CAAAA,QAAQ,CAACM,IAAD,CAAOE,GAAP,CAF3B,QAEAI,UAFA,eAGNR,IAAI,CAACM,MAAL,CAAc,IAAd,CACAN,IAAI,CAACA,IAAL,CAAYQ,UAAZ,CACAP,IAAI,CAAC,QAAD,CAAJ,CALM,+EASNQ,KAAK,CAAC,sBAAD,CAAL,CATM,oEAAH,kBAALF,CAAAA,KAAK,0CAAX,CAYA,mBACI,KAAC,SAAD,EACI,SAAS,CAAC,+BADd,uBAEI,MAAC,IAAD,EAAM,KAAK,CAAE,CAAEG,KAAK,CAAE,GAAT,CAAcC,MAAM,CAAE,GAAtB,CAAb,CAA0C,SAAS,CAAC,gBAApD,wBACI,WAAI,SAAS,CAAC,QAAd,gFADJ,cAEI,MAAC,IAAD,EAAM,SAAS,CAAC,oBAAhB,wBACI,KAAC,IAAD,CAAM,OAAN,EAAc,WAAW,CAAC,kEAA1B,CACI,SAAS,CAAC,MADd,CAEI,KAAK,CAAET,IAFX,CAGI,QAAQ,CAAE,kBAACU,CAAD,QAAsCT,CAAAA,OAAO,CAACS,CAAC,CAACC,MAAF,CAASC,KAAV,CAA7C,EAHd,EADJ,cAKI,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CAA8B,WAAW,CAAC,oFAA1C,CACI,SAAS,CAAC,MADd,CAEI,KAAK,CAAEV,GAFX,CAGI,QAAQ,CAAE,kBAACQ,CAAD,QAAsCP,CAAAA,MAAM,CAACO,CAAC,CAACC,MAAF,CAASC,KAAV,CAA5C,EAHd,EALJ,cASI,KAAC,MAAD,EAAQ,SAAS,CAAC,MAAlB,CACI,OAAO,CAAEP,KADb,4CATJ,GAFJ,GAFJ,EADJ,CAqBH,CA/CD,CAiDA,cAAeR,CAAAA,IAAf","sourcesContent":["import { Container, Form, Card, Button } from 'react-bootstrap'\r\nimport React, { ChangeEvent, useContext, useEffect, useState } from 'react';\r\nimport { loginApi } from '../httpApi/UserApi';\r\nimport { Context } from '..';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface IUser {\r\n    id: number;\r\n    name: string;\r\n    role: string;\r\n    iat: number;\r\n    exp: number;\r\n}\r\n\r\nconst Auth = () => {\r\n\r\n    const { user } = useContext(Context);\r\n    const navi = useNavigate();\r\n    const [name, setName] = useState(\"\");\r\n    const [pwd, setPwd] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (user.isAuth) {\r\n            navi(\"/panel\");\r\n        }\r\n    });\r\n\r\n\r\n    const click = async () => {\r\n        try {\r\n            const decodeUser = await loginApi(name, pwd);\r\n            user.isAuth = true;\r\n            user.user = decodeUser;\r\n            navi(\"/panel\");\r\n\r\n        }\r\n        catch (e) {\r\n            alert(\"Ошибка авторизации!!\");\r\n        }\r\n    }\r\n    return (\r\n        <Container\r\n            className='d-flex justify-content-center' >\r\n            <Card style={{ width: 600, height: 300 }} className='px-5 pb-5 pt-2'>\r\n                <h2 className='m-auto'>Авторизация</h2>\r\n                <Form className='d-flex flex-column'>\r\n                    <Form.Control placeholder='Введите имя...'\r\n                        className='mt-2'\r\n                        value={name}\r\n                        onChange={(e: ChangeEvent<HTMLInputElement>) => setName(e.target.value)} />\r\n                    <Form.Control type='password' placeholder='Введите пароль...'\r\n                        className='mt-2'\r\n                        value={pwd}\r\n                        onChange={(e: ChangeEvent<HTMLInputElement>) => setPwd(e.target.value)} />\r\n                    <Button className='mt-2'\r\n                        onClick={click}>Войти</Button>\r\n\r\n                </Form>\r\n            </Card>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Auth;"]},"metadata":{},"sourceType":"module"}